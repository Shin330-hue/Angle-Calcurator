# 三角形計算機 仕様書

## 概要
金属加工現場向けの直角三角形計算アプリ。辺の長さや角度を入力すると、三角関数を使って未知の値を計算する。

## 対象プラットフォーム
- Android (API 24+)
- Jetpack Compose UI

---

## 画面構成

### 1. ホーム画面
| 要素 | 説明 |
|------|------|
| タイトル | 「三角形計算機」 |
| 計算機ボタン | 計算画面へ遷移 |
| 設定ボタン | 設定画面へ遷移 |

### 2. 計算機画面
| 要素 | 説明 |
|------|------|
| 三角形図形 | 直角三角形のビジュアル表示 |
| 入力フィールド | 辺a, b, c および 角B, C |
| 計算ボタン | 未知の値を計算 |
| クリアボタン | 全入力をリセット |
| 保存ボタン | 現在の値を履歴に保存 |
| 履歴ボタン | 保存済みデータの読み込み・削除 |

### 3. 設定画面
| 設定項目 | 説明 | 範囲 |
|----------|------|------|
| 角度の小数点桁数 | 計算結果の表示精度 | 0〜5 |
| 辺の長さの小数点桁数 | 計算結果の表示精度 | 0〜5 |

---

## 三角形の定義

```
        C (右上)
       /|
      / |
   a /  | b (対辺)
    /   |
   /θ   |90°
  B-----A
    c (隣辺)
```

| 要素 | 位置 | 説明 |
|------|------|------|
| 角 A | 右下 | 直角 (90°固定) |
| 角 B (θ) | 左下 | 求める角度 |
| 角 C | 右上 | 90° - θ |
| 辺 a | 斜め | 斜辺 (hypotenuse) |
| 辺 b | 垂直 | 対辺 (opposite to θ) |
| 辺 c | 水平 | 隣辺 (adjacent to θ) |

---

## 計算ロジック

### 使用する公式
1. **三平方の定理**: a² = b² + c²
2. **正弦定理**: sin(θ) = b / a
3. **余弦定理**: cos(θ) = c / a
4. **正接**: tan(θ) = b / c
5. **角度の合計**: A + B + C = 180°

### 入力要件
- 最低3つの値を入力（辺を1つ以上含む）
- 角Aは常に90°

### エラーメッセージ
| 状況 | メッセージ |
|------|-----------|
| 入力不足 | 情報が不足しています。辺を1つ以上含む、3つ以上の値を入力してください。 |
| 計算不能 | 計算できませんでした。入力値が有効な三角形を形成するか確認してください。 |

---

## データ保存

### 保存形式
- SharedPreferences (JSON)

### 保存項目
| フィールド | 型 | 説明 |
|------------|-----|------|
| id | Long | タイムスタンプ |
| name | String | ユーザー指定の名前 |
| sideA | Double? | 斜辺 |
| sideB | Double? | 対辺 |
| sideC | Double? | 隣辺 |
| angleA | Double? | 90° |
| angleB | Double? | θ |
| angleC | Double? | 90° - θ |

---

## ファイル構成

```
app/src/main/java/com/anglecalc/app/
├── MainActivity.kt      # UI (ホーム、計算機、設定画面)
├── TriangleSolver.kt    # 計算ロジック
├── MemoryManager.kt     # 履歴の保存・読込
└── SettingsManager.kt   # 設定の保存・読込
```

---

## 依存ライブラリ
| ライブラリ | 用途 |
|-----------|------|
| Jetpack Compose | UI |
| Material Icons Extended | アイコン |
| Gson | JSON シリアライズ |

---

## バージョン履歴
| バージョン | 日付 | 変更内容 |
|-----------|------|----------|
| 1.0 | 2024-12-13 | 初期リリース |
